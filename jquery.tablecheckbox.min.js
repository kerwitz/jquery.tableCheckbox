!function(e){e.fn.tablecheckbox=function(t){var n={config:e.extend({selectedRowClass:"warning",checkboxSelector:'td:first-of-type input[type="checkbox"],th:first-of-type input[type="checkbox"]',isChecked:function(e){return e.is(":checked")}},t),registry:{shiftKeyIsPressed:!1},helpers:{selection:window.getSelection?window.getSelection():document.selection?document.selection:null,removeTextSelection:function(){n.helpers.selection&&(n.helpers.selection.empty?n.helpers.selection.empty():n.helpers.selection.removeAllRanges())},hasSelection:function(){return!!n.helpers.selection&&n.helpers.selection.toString().length}}};return e(document).on("keydown.tsc keyup.tsc",function(e){n.registry.shiftKeyIsPressed=e.shiftKey}),this.each(function(){var t=e(this),c=t.find("thead tr "+n.config.checkboxSelector),i=t.find("tr "+n.config.checkboxSelector).not(c),o=[];c.on("change",function(e){i.prop("checked",n.config.isChecked(c)).trigger("change")}),i.each(function(){var c=e(this),i=c.parents("tr");c.on("change",function(e,s){n.helpers.removeTextSelection(),!s&&n.registry.shiftKeyIsPressed&&o.length&&($inbetween=o.index()<i.index()?i.prevUntil(o):i.nextUntil(o),$inbetween.find(n.config.checkboxSelector).prop("checked",n.config.isChecked(c)).trigger("change",[!0]),t.trigger(n.config.isChecked(c)?"multirowselect":"multirowdeselect")),o=i,i.toggleClass(n.config.selectedRowClass,n.config.isChecked(c)),i.trigger(n.config.isChecked(c)?"rowselect":"rowdeselect")}),i.on("click",function(t){n.helpers.hasSelection()||(e.data(i,"tc-timeout")&&window.clearTimeout(e.data(i,"tc-timeout")),e.data(i,"tc-timeout",window.setTimeout(function(){n.helpers.hasSelection()||e(t.target).is("a,input,button")||e(t.target).parents("a,input,button").length||c.prop("checked",!n.config.isChecked(c)).trigger("change")},50)))})})})}}(jQuery);